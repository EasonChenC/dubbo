<!-- Generated by SpecStory -->

# Debugging Dubbo service provider issue (2025-06-12 15:26:08)

_**User**_

@/consumer @/provider è¿è¡Œæµ‹è¯•æ¶ˆè´¹è€…æ¥å£å‡ºç°org.apache.dubbo.rpc.RpcException: No provider available from registry RegistryDirectory(registry: 192.168.31.91:2181)-Directory(invokers: 0[], validInvokers: 0[], invokersToReconnect: 0[]) for service com.ck.api.service.DemoDubboService on consumer 192.168.31.41 use dubbo version 3.3.4, please check status of providers(disabled, not registered or in blocklist).
	at org.apache.dubbo.registry.integration.DynamicDirectory.doList(DynamicDirectory.java:204) ~[dubbo-3.3.4.jar:3.3.4]
	at org.apache.dubbo.rpc.cluster.directory.AbstractDirectory.list(AbstractDirectory.java:232) ~[dubbo-3.3.4.jar:3.3.4]
	at org.apache.dubbo.rpc.cluster.support.AbstractClusterInvoker.list(AbstractClusterInvoker.java:452) ~[dubbo-3.3.4.jar:3.3.4]
	at org.apache.dubbo.rpc.cluster.support.AbstractClusterInvoker.invoke(AbstractClusterInvoker.java:355) ~[dubbo-3.3.4.jar:3.3.4]
	at org.apache.dubbo.rpc.cluster.router.RouterSnapshotFilter.invoke(RouterSnapshotFilter.java:46) ~[dubbo-3.3.4.jar:3.3.4]
	at org.apache.dubbo.rpc.cluster.filter.FilterChainBuilder$CopyOfFilterChainNode.invoke(FilterChainBuilder.java:349) ~[dubbo-3.3.4.jar:3.3.4]é”™è¯¯

---

_**Assistant**_

æˆ‘æ¥åˆ†æè¿™ä¸ªDubboæœåŠ¡è°ƒç”¨å¤±è´¥çš„é—®é¢˜ã€‚é¦–å…ˆè®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹æ¶ˆè´¹è€…å’Œæä¾›è€…çš„é¡¹ç›®ç»“æ„å’Œé…ç½®ã€‚

---

<details>
            <summary>Listed directory consumer â€¢ **3** results</summary>
        
| Name |
|-------|
| ğŸ“ `target` |
| ğŸ“„ `pom.xml` |
| ğŸ“ `src` |

</details>

---

<details>
            <summary>Listed directory provider â€¢ **3** results</summary>
        
| Name |
|-------|
| ğŸ“ `target` |
| ğŸ“„ `pom.xml` |
| ğŸ“ `src` |

</details>

---

<details>
            <summary>Listed directory consumer/src â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“ `main` |
| ğŸ“ `test` |

</details>

---

<details>
            <summary>Listed directory provider/src â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“ `main` |
| ğŸ“ `test` |

</details>

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ¶ˆè´¹è€…å’Œæä¾›è€…çš„pom.xmlé…ç½®ä»¥åŠå…³é”®æºç æ–‡ä»¶ï¼š

---

Read file: consumer/pom.xml

---

Read file: provider/pom.xml

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ¶ˆè´¹è€…å’Œæä¾›è€…çš„ä¸»è¦æºç ç›®å½•ï¼š

---

<details>
            <summary>Listed directory consumer/src/main â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“ `resources` |
| ğŸ“ `java` |

</details>

---

<details>
            <summary>Listed directory provider/src/main â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“ `resources` |
| ğŸ“ `java` |

</details>

---

<details>
            <summary>Listed directory consumer/src/main/java â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“ `com` |

</details>

---

<details>
            <summary>Listed directory provider/src/main/java â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“ `com` |

</details>

---

<details>
            <summary>Searched codebase "dubbo configuration application.yml application.properties" â€¢ **15** results</summary>
        
| File | Lines |
|------|-------|
| `provider/src/main/resources/application.yml` | L1-15 |
| `pom.xml` | L27-69 |
| `provider/src/main/java/com/ck/provider/ProviderApplication.java` | L1-15 |
| `provider/pom.xml` | L1-53 |
| `consumer/pom.xml` | L1-56 |
| `pom.xml` | L1-27 |
| `api/pom.xml` | L1-25 |
| `provider/src/main/java/com/ck/provider/service/DemoDubboServiceImpl.java` | L1-21 |
| `src/test/java/com/ck/dubbo/DubboImplApplicationTests.java` | L1-13 |
| `api/src/main/java/com/ck/api/service/DemoDubboService.java` | L1-6 |
| `provider/src/test/java/com/ck/provider/ProviderApplicationTests.java` | L1-13 |
| `api/src/test/java/com/ck/api/ApiApplicationTests.java` | L1-13 |
| `.gitignore` | L1-34 |
| `.cursorindexingignore` | L1-4 |
| `.specstory/.gitignore` | L1-3 |

</details>

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ¶ˆè´¹è€…å’Œæä¾›è€…çš„é…ç½®æ–‡ä»¶ä»¥åŠæœåŠ¡å®ç°ï¼š

---

Read file: provider/src/main/resources/application.yml

---

<details>
            <summary>Searched codebase "consumer application.yml" â€¢ **7** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: consumer/src/main/resources/application.yml

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ¶ˆè´¹è€…çš„æœåŠ¡å®ç°å’Œæ§åˆ¶å™¨ï¼š

---

Read file: consumer/src/main/java/com/ck/consumer/ConsumerApplication.java

---

Read file: consumer/src/main/java/com/ck/consumer/service/impl/DemoServiceImpl.java

---

Read file: consumer/src/main/java/com/ck/consumer/controller/DemoController.java

---

Read file: provider/src/main/java/com/ck/provider/service/DemoDubboServiceImpl.java

---

ç°åœ¨è®©æˆ‘æ£€æŸ¥æ ¹ç›®å½•æ˜¯å¦æœ‰ä¸»pom.xmlï¼š

---

Read file: pom.xml

---

æ ¹æ®æˆ‘çš„åˆ†æï¼Œå‡ºç°"No provider available from registry"é”™è¯¯çš„ä¸»è¦åŸå› æ˜¯æä¾›è€…æ²¡æœ‰æˆåŠŸæ³¨å†Œåˆ°Zookeeperæ³¨å†Œä¸­å¿ƒã€‚è®©æˆ‘ä¸ºæ‚¨åˆ†æå‡ ä¸ªå¯èƒ½çš„é—®é¢˜å¹¶æä¾›è§£å†³æ–¹æ¡ˆï¼š

## é—®é¢˜åˆ†æ

ä»é”™è¯¯ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼š
- æ¶ˆè´¹è€…è¿æ¥åˆ°äº†Zookeeperï¼ˆ192.168.31.91:2181ï¼‰
- ä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å¯ç”¨çš„æä¾›è€…ï¼ˆinvokers: 0[], validInvokers: 0[]ï¼‰
- æœåŠ¡æ¥å£æ˜¯ `com.ck.api.service.DemoDubboService`

## ä¸»è¦é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
æ‚¨çš„é¡¹ç›®ä¸­å­˜åœ¨Spring Bootç‰ˆæœ¬å†²çªï¼š
- çˆ¶POMä½¿ç”¨ Spring Boot 3.0.4
- ä½†åœ¨dependencyManagementä¸­æŒ‡å®šäº† Spring Boot 2.3.7.RELEASE

è®©æˆ‘ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼š

---

```diff
      <dependencyManagement>
          <dependencies>
-             <dependency>
-                 <groupId>org.springframework.boot</groupId>
-                 <artifactId>spring-boot-starter</artifactId>
-                 <version>2.3.7.RELEASE</version>
-             </dependency>
-             <dependency>
-                 <groupId>org.springframework.boot</groupId>
-                 <artifactId>spring-boot-starter-web</artifactId>
-                 <version>2.3.7.RELEASE</version>
-             </dependency>
- 
              <!-- dubbo ä¾èµ– -->
              <dependency>
```

---

### 2. ä¿®å¤æ¶ˆè´¹è€…æœåŠ¡å®ç°ä¸­çš„é”™è¯¯æ³¨è§£

æ¶ˆè´¹è€…çš„DemoServiceImplç±»ä¸­ä¸åº”è¯¥ä½¿ç”¨@DubboServiceæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯ç”¨äºæä¾›è€…çš„ï¼š

---

```diff
  import com.ck.consumer.service.DemoService;
  import org.apache.dubbo.config.annotation.DubboReference;
- import org.apache.dubbo.config.annotation.DubboService;
  import org.springframework.stereotype.Service;
  
```

```diff
   * @Version: 1.0
   */
- @DubboService
  @Service
  public class DemoServiceImpl implements DemoService {
  
-     @DubboReference(loadbalance = "RoundRobin")
+     @DubboReference(loadbalance = "roundrobin")
      private DemoDubboService demoDubboService;
  
```

---

### 3. æ·»åŠ æ¨¡å—å£°æ˜åˆ°æ ¹POM

æ ¹POMç¼ºå°‘æ¨¡å—å£°æ˜ï¼š

---

```diff
  
      <packaging>pom</packaging>
+ 
+     <modules>
+         <module>api</module>
+         <module>provider</module>
+         <module>consumer</module>
+     </modules>
  
      <parent>
```

---

### 4. å¢å¼ºæä¾›è€…é…ç½®

ä¸ºäº†ç¡®ä¿æä¾›è€…èƒ½æ­£ç¡®æ³¨å†Œï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€äº›é¢å¤–çš„é…ç½®ï¼š

---

```diff
      name: dubbo
      port: 20881
+     host: 192.168.31.41
+   provider:
+     timeout: 5000
+     retries: 0
+   scan:
+     base-packages: com.ck.provider.service
+ 
+ server:
+   port: 8080
+ 
+ logging:
+   level:
+     com.ck: DEBUG
+     org.apache.dubbo: INFO
  
```

---

### 5. å¢å¼ºæ¶ˆè´¹è€…é…ç½®

åŒæ ·ä¸ºæ¶ˆè´¹è€…æ·»åŠ æ›´è¯¦ç»†çš„é…ç½®ï¼š

---

```diff
      name: dubbo
      port: 20882
+   consumer:
+     timeout: 5000
+     retries: 0
+     check: false
+ 
  server:
    port: 8999
+ 
+ logging:
+   level:
+     com.ck: DEBUG
+     org.apache.dubbo: INFO
  
```

---

## æ’æŸ¥å’Œè§£å†³æ­¥éª¤

ç°åœ¨è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ’æŸ¥å’Œè§£å†³ï¼š

### 1. ç¡®ä¿ZookeeperæœåŠ¡æ­£å¸¸è¿è¡Œ
é¦–å…ˆç¡®è®¤ZookeeperæœåŠ¡åœ¨192.168.31.91:2181ä¸Šæ­£å¸¸è¿è¡Œï¼š

---

```bash
telnet 192.168.31.91 2181
```

```
Microsoft Windows [ç‰ˆæœ¬ 10.0.19044.1766]
(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

D:\personal_project\dubbo\dubboImpl>telnet 192.168.31.91 2181
Microsoft Windows [ç‰ˆæœ¬ 10.0.19044.1766]
(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

D:\personal_project\dubbo\dubboImpl>telnet 192.168.31.91 2181
```

---

### 2. é‡æ–°ç¼–è¯‘é¡¹ç›®
æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ï¼š

---

```bash
mvn clean compile -DskipTests
```

```
Microsoft Windows [ç‰ˆæœ¬ 10.0.19044.1766]
(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

D:\personal_project\dubbo\dubboImpl>telnet 192.168.31.91 2181
Microsoft Windows [ç‰ˆæœ¬ 10.0.19044.1766]
(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

D:\personal_project\dubbo\dubboImpl>telnet 192.168.31.91 2181






















































D:\personal_project\dubbo\dubboImpl>
```

---





---

